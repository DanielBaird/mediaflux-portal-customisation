<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/prism/1.4.1/themes/prism.css">
<style>
  html {
    font-family: lato, sans-serif;
    font-size: 14px;
    font-size: calc(14px + 0.2vw);
    line-height: 1.5;
    background: white;
    padding: 0;
    margin: 0;
  }

  body {
    max-width: 40rem;
    margin: 0 auto;
    padding: 0 1rem 5rem;
  }

  h1 {
    color: #f3f9ff;
    color; white;
    background: #357;
    line-height: 1.1;
    margin: 0 0 1rem;
    padding: 1em 0;
    box-shadow: -39.9rem 0 #357, 39.9rem 0 #357;
  }

  h1, h2 {
    font-weight: 100;
    letter-spacing: -0.025em;
  }

  h2, h3, h4, h5, h6 {
    color: #357;
    margin: 0 0 0 -0.1em;
    padding: 1.5em 0 0.5rem;
  }

	h1 { font-size: 2.369rem; opacity: 1.00; font-weight: 400; }
  /* not using 3.157rem */
	h2 { font-size: 2.369rem; opacity: 0.85; font-weight: 200; }
	h3 { font-size: 1.778rem; opacity: 0.90; font-weight: 400; }
	h4 { font-size: 1.333rem; opacity: 0.95; font-weight: 600; }
	h5 { font-size: 1.000rem; opacity: 1.00; font-weight: 800; }
	h6 { font-size: 1.000rem; opacity: 1.00; font-style: italic; }

  h2 { 
    border-bottom: 1px solid;
    padding: 3rem 0 0;
    margin-bottom: 1rem;
  }

  h1 a, h2 a, h3 a, h4 a, h5 a, h6 a {
    color: inherit;
    border-bottom: 2px dotted;
    text-decoration: inherit;
  }
  h1 a:hover, h2 a:hover, h3 a:hover, h4 a:hover, h5 a:hover, h6 a:hover {
    border-bottom: 2px solid;
  }

  p, li {
    margin: 0;
    padding: 0.33em 0;
  }

  li {
    padding-left: 1em;
    text-indent: -1em;
  }

  code {
    font-size: smaller;
  }

  p > code {
    background: #f3f9ff;
    padding: 0.3em;
    border-radius: 0.3em;
  }

  pre {
    padding: 0.5em;
    background: #f3f9ff;
    border-left: 1px solid #eef0ff;
    max-width: 100%;
    overflow-x: auto;
    /*box-shadow: -50rem 0 #f3f9ff, 50rem 0 #f3f9ff;*/
  }

  pre.small { font-size: 75%; color: rgba(0,0,0, 0.8) }

  /* override some Prism sourcecode highlight styles */
  pre[class*="language-"] {
    line-height: 1.2;
    overflow-x: auto;
    background: #f3f9ff;
  }
  :not(pre) > code[class*="language-"] {
    background: #f3f9ff;
    padding: 0.3em;
    border-radius: 0.3em;
  }

  code[class*="language-"] {
    line-height: 1.2;
  }

  pre p {
    padding: 0;
  }


  /* ToC management */
  #tocHeading { cursor: pointer; }
  #tocContent { overflow: hidden; font-size: smaller; }
  .open   #tocHeading:after { content: ' \25be' }
  .closed #tocHeading:after { content: ' \25b8' }
  .open   #tocContent { height: auto; }
  .closed #tocContent { height: 0; }

/* svg diagrams */
svg {
  position: relative;
  z-index: 1;
  fill: rgba(200,200,200, 0.25);
  stroke: #999;
  stroke-width: 0.3;
}
#sourcesvg {
  display: none;
}
#diag-bg {
  fill: rgba(255,255,255, 1);
  stroke: none;
}
svg.diag {
  transform: rotate(6deg);
  float: right;
  width: 111px;
  height: 144px;
  margin: 2em 0 0 2em;
}
svg use.highlight {
  fill: #ff9;
  fill: rgba(255,255,153, 0.9);
  stroke: #333;
  stroke-width: 0.6;
}
</style>
</head>
<body>

<!--this is the SVG page diagram used to indicate sections being discussed -->
<svg id="sourcesvg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <symbol id="diag-bg" viewBox="0 0 38 47"><rect x="0" y="0" width="38" height="47" /></symbol>
    <symbol id="diag-head" viewBox="0 0 38 47"><rect x="2" y="2" width="34" height="4" /></symbol>
    <symbol id="diag-nav" viewBox="0 0 38 47">
      <rect x="5" y="6" width="7" height="3" />
      <rect x="12" y="6" width="7" height="3" />
      <rect x="19" y="6" width="7" height="3" />
      <rect x="26" y="6" width="7" height="3" />
    </symbol>
    <symbol id="diag-content" viewBox="0 0 38 47"><rect x="5" y="9" width="28" height="34" /></symbol>
    <symbol id="diag-collbar" viewBox="0 0 38 47"><rect x="7" y="11" width="24" height="3" /></symbol>
    <symbol id="diag-side" viewBox="0 0 38 47"><rect x="7" y="16" width="5" height="12" /></symbol>
    <symbol id="diag-pg" viewBox="0 0 38 47">
      <rect x="20" y="16" width="2" height="2" />
      <rect x="23" y="16" width="2" height="2" />
      <rect x="26" y="16" width="2" height="2" />
      <rect x="29" y="16" width="2" height="2" />

      <rect x="20" y="39" width="2" height="2" />
      <rect x="23" y="39" width="2" height="2" />
      <rect x="26" y="39" width="2" height="2" />
      <rect x="29" y="39" width="2" height="2" />
    </symbol>
    <symbol id="diag-res" viewBox="0 0 38 47">
      <rect x="14" y="20" width="17" height="5" />
      <rect x="14" y="26" width="17" height="5" />
      <rect x="14" y="32" width="17" height="5" />
    </symbol>
    <symbol id="diag-foot" viewBox="0 0 38 47"><rect x="2" y="43" width="34" height="2" /></symbol>

    <symbol id="diag-popup" viewBox="0 0 38 47">
      <line x1="0" y1="0" x2="38" y2="47" stroke-width="100" stroke="white" stroke-dasharray="0.5,0.5" />
      <rect x="8" y="13" width="22" height="17" />
      <rect x="18" y="26" width="4" height="2" />
      <rect x="24" y="26" width="4" height="2" />
    </symbol>

    <symbol id="diag" viewBox="0 0 38 47">
      <use xlink:href="#diag-bg"></use>
      <use xlink:href="#diag-head"></use>
      <use xlink:href="#diag-nav"></use>
      <use xlink:href="#diag-content"></use>
      <use xlink:href="#diag-collbar"></use>
      <use xlink:href="#diag-side"></use>
      <use xlink:href="#diag-pg"></use>
      <use xlink:href="#diag-res"></use>
      <use xlink:href="#diag-foot"></use>
    </symbol>
  </defs>
</svg>


<div class="wrapper language-scss"><h1>Styling a MediaFlux portal</h1>
<h2>About this document</h2>
<h4>Purpose</h4>
<p>This document describes the default web style applied to
Mediaflux portals, and serves as a springboard for modifying
the styles to produce unique portal experiences.</p>
<p>Light modification is possible by changing colour and size
settings, and enough instruction is also provided for someone
with some web design skills to perform deeper customisations.</p>
<h4>Audience</h4>
<p>Generally this document assumes you're familiar with the
basics of CSS and the HTML Document Object Model.  If you
learned HTML and CSS a while ago, an appendix at the end of
this document will give you a quick overview of any new or
obscure CSS techniques used in this document.</p>
<h4>Source</h4>
<p>This document is written in a &quot;literate&quot; style, where the
source document is both live Sass/SCSS source that produces
the CSS, and a Markdown-formatted document describing the code.</p>
<p>Visit
<a href="https://github.com/DanielBaird/mediaflux-portal-customisation/blob/master/styles/sass/styles.scss">styles.scss</a>
to see the source document.</p>
<p>The source document is already valid SCSS, so CSS is produced
by running it through the Sass compiler.  <strong>This source
document and a Sass compiler are all you need to produce the
CSS that customises your Mediaflux portal.</strong></p>
<p>There are several online sites that will compile Sass into
CSS for you.  These sites worked well:</p>
<ul>
<li><a href="http://www.sassmeister.com/">sassmeister.com</a></li>
<li><a href="http://beautifytools.com/scss-compiler.php">beautifytools.com</a></li>
<li><a href="http://sass.js.org/">sass.js.org</a></li>
</ul>
<p>(The text below will be included in the output CSS.)</p>
<pre><code> /*!
The original source of the text you're
reading is an SCSS formatted file. SCSS 
is a superset of CSS with additional 
features that are resolved into valid 
CSS by an SCSS compiler.

To alter this CSS, you should obtain 
the SCSS source file and recompile it.
Visit the website:
https://github.com/DanielBaird/mediaflux-portal-customisation
for more information.
 */
</code></pre>
<p>Documentation is produced by transforming the same source
into a web page with a few simple steps:</p>
<ul>
<li>find lines starting with <code>//</code>, and remove those two
initial characters;</li>
<li>indent all other lines by four spaces.</li>
</ul>
<p>These steps produce a Markdown document which may be converted
into a HTML document with a Markdown processor.</p>
<p>Visit the site mentioned above for the conversion script and
more.</p>
<h2>Variables</h2>
<p>Simple customisation of portal sites can be achieved by
editing variables in this section.  Check the appendix for
a description of how CSS specifies colour; corporate style
guides usually give CSS compatible specifications for brand
colours.</p>
<h4>Colours</h4>
<p>For a minimal customisation, set this one colour.</p>
<p>If you have a marketing / identify plan it probably specifies
a <strong><code>brand-color</code></strong>; or you can select one of the colours
specified below. Choose something that is dark enough to
support white text.</p>
<pre><code>$brand-color: rgb(170, 34, 34); // red
$brand-color: rgb(0, 0, 0); // black (this is quite severe)
$brand-color: rgb(0, 0, 128); // navy
$brand-color: rgb(0, 102, 11); // green
$brand-color: rgb(128, 0, 128); // purple
$brand-color: rgb(139, 69, 19); // brown
$brand-color: rgb(51, 102, 153); // denim blue
</code></pre>
<p>The <strong><code>brand-highlight-color</code></strong> is a bright contrast to your
brand colour, used to draw attention. Here it is created as
the complement of your brand colour, lightened up a bit.</p>
<pre><code>$brand-highlight-color: scale-color(
	adjust-hue($brand-color, 180deg), $saturation: 100%, $lightness: 33%
);
</code></pre>
<p><strong><code>dark-brand-color</code></strong> is a darker version of your branding
colour, used where vivid colour is less appropriate, for
example the text colour for headings.</p>
<pre><code>$dark-brand-color: scale-color($brand-color, $lightness: -33%);
</code></pre>
<p><strong><code>brand-shading</code></strong> is a light background colour, used behind
dark text.</p>
<pre><code>$brand-shading: scale-color($brand-color, $lightness: 90%);
</code></pre>
<p><strong><code>brand-highlight-shading</code></strong> is a lightened version of the
highlight colour.</p>
<pre><code>$brand-highlight-shading: scale-color($brand-highlight-color, $lightness: 80%);
</code></pre>
<p><svg class="diag"><use class="highlight" xlink:href="#diag"></use></svg></p>
<h4>Overall page level variables</h4>
<p>Most of the page layout is adjusted to suit the size of
text on the page.  Set this to <code>small</code>, <code>medium</code>, or <code>large</code>.</p>
<p>Remember that although smaller text usually looks &quot;nicer&quot;,
the users of your portal are there to get information by
reading text. They may not have perfect vision, and may not
have a screen as nice as yours.</p>
<pre><code>$text-size: medium;
</code></pre>
<p>Default the general page colours to to white background and
dark text (not quite black, to avoid harsh contrast).</p>
<pre><code>$page-background: #fff;
$page-color: #333;
</code></pre>
<p>when printing, reset text to black to avoid the blurry
&quot;process&quot; grey many printers use.</p>
<pre><code>$page-print-background: $page-background;
$page-print-color: #000;
</code></pre>
<p>The <code>$column-max-width</code> variable below defines the maximum
width of the page as 57 root ems wide, which is roughly
120 letters.  (An appendix later in this document describes
<code>em</code>s, <code>rem</code>s and other CSS units).</p>
<p>On a wide screen, list-of-items type portal pages will show
a sidebar column next to the content column. The preferred
width of the sidebar is set to 14 root ems in the variable
<code>$sidebar-width</code>.</p>
<p>The <code>$content-spacing</code> variable defines whitespace between
major elements of the page.  Pixels are free, so don't be
too stingy with this.</p>
<p>On a narrower screen, the sidebar becomes a sort of *top-*bar.
The minimum width of the content column is added to the
preferred width of the sidebar to work out whether to use a
two-column or one-column layout.</p>
<p>The sum of <code>$sidebar-width</code>, <code>$content-min-width</code>, and
<code>$content-spacing</code> should be strictly less than the value
you give <code>$column-max-width</code>.</p>
<pre><code>$column-max-width: 57rem;
$sidebar-width: 14rem;
$content-min-width: $sidebar-width * 2.5;
$content-spacing: 3rem;
</code></pre>
<p>The standard background and text colour for the main content
column.</p>
<pre><code>$content-background: $page-background;
$content-color: $page-color;
</code></pre>
<p>Choose a shading colour for doing subtle shading within the
content area (this is used for source code, blockquotes, etc)</p>
<pre><code>$content-shading: $brand-shading;
</code></pre>
<h4>Form controls</h4>
<p>How big should controls like buttons be?  This will be used
for the height of text inputs, the minimum width of buttons,
etc.</p>
<pre><code>$control-size: 2rem;
</code></pre>
<p>The colours used for controls include a default background,
and an &quot;active&quot; background for activated or hovered controls.</p>
<pre><code>$control-background: $content-background;
$control-content-color: $content-color;
$control-active-background: $brand-highlight-shading;
$control-active-content-color: $dark-brand-color;
</code></pre>
<p>The border on form controls helps to distinguish the control
as an interaction point.  Brightly coloured controls can
usually go without a border.</p>
<p>Square corners on buttons etc looks more modern, but a
little rounding helps to identify the button or textbox as
something you can interact with.  Set this to your preferred
corner radius.</p>
<pre><code>$control-border-color: $brand-shading;
$control-border: 1px solid $control-border-color;
$control-corner-radius: 0.125rem;
</code></pre>
<p><svg class="diag"><use xlink:href="#diag"></use><use class="highlight" xlink:href="#diag-head"></use></svg></p>
<h4>Header related variables</h4>
<p>The height of the page header and the size of the heading
inside the page header.  If you update these values, make
sure the <code>$header-height</code> value is larger than the
<code>$header-text-size</code> value.</p>
<pre><code>$header-height: calc(3rem + 5vw);
$header-text-size: calc(1rem + 1vw);
</code></pre>
<p>Header colors</p>
<pre><code>$header-background: $brand-color;
$header-content-color: white;
</code></pre>
<p>It's preferable to use a vector format
like SVG for your site logo, but if you're using a pixel
format logo that you prefer doesn't get resized, set the
<code>$resizeable-logo</code> variable to <code>false</code> and specify your logo
size in the <code>$logo-height</code> and <code>$logo-width</code> variables.</p>
<p>If <code>$resizeable-logo</code> is set to <code>true</code>, the logo will be
sized according to the header.</p>
<pre><code>$resizable-logo: true;
$logo-height: 65px;
$logo-width: 65px;
</code></pre>
<p><svg class="diag"><use xlink:href="#diag"></use><use class="highlight" xlink:href="#diag-nav"></use></svg></p>
<h4>Navbar</h4>
<p>The height of the main navigation bar is set here using <code>rem</code>
units, which are proportional to the standard text size.</p>
<pre><code>$navbar-height: 3rem;
$navbar-text-size: 1rem;
</code></pre>
<p>Navbar items have three states: normal, selected (the one
that matches the current content), and highlighted (for
when the user's mouse is hovering over it).</p>
<pre><code>$navbar-background: $dark-brand-color;
$navbar-content-color: $brand-shading;

$navbar-highlight-background: $navbar-content-color;
$navbar-highlight-content-color: $navbar-background;

$navbar-current-background: $content-background;
$navbar-current-content-color: $content-color;
</code></pre>
<p><svg class="diag"><use xlink:href="#diag"></use><use class="highlight" xlink:href="#diag-collbar"></use></svg></p>
<h4>Collection bar</h4>
<p>The collection bar has background and text colours, and a
bottom border. I recommend you choose either background
shading <em>or</em> a border; this styling opts for a border.</p>
<pre><code>$collection-bar-background: $content-background;
$collection-bar-content-color: $dark-brand-color;
$collection-bar-border-width: 0.25rem;
</code></pre>
<p><svg class="diag"><use xlink:href="#diag"></use><use class="highlight" xlink:href="#diag-side"></use></svg></p>
<h4>Sidebar</h4>
<p>The sidebar includes facet filters; if you set a
background for the sidebar, you probably don't want
a background for the facets, and vice versa.</p>
<pre><code>$sidebar-background: transparent;
$sidebar-content-color: $page-color;
$sidebar-facet-background: $brand-shading;
</code></pre>
<h4>Content related items</h4>
<p><svg class="diag"><use xlink:href="#diag"></use><use class="highlight" xlink:href="#diag-res"></use></svg></p>
<h5>Result cards</h5>
<p>The details of each result in a result list are shown within
a visual container. Here the background colour and border
properties of that container are set.</p>
<pre><code>$result-background: $brand-shading;
$result-background: $content-background;
</code></pre>
<p>Set <code>$result-border-width</code> to <code>0</code> to have no border.  Try
<code>1px</code> for a thin edge.  Set <code>$result-corner-radius</code> if your
result cards should have rounded corners (try <code>3px</code> for a
subtle rounding, or <code>0.5rem</code> for a playing card type corner).
Change <code>$result-padding</code> to change the space between each
result item's border and its content.</p>
<pre><code>$result-border-color: $brand-shading;
$result-border-width: 0;
$result-top-border-width: $result-border-width;
$result-top-border-width: 0.25rem;
$result-corner-radius: 0;
$result-padding: 1rem;
</code></pre>
<p>To produce a physical &quot;card&quot; effect for result items, you can
choose to have a
<a href="https://en.wikipedia.org/wiki/Drop_shadow">drop shadow</a>
effect applied by setting <code>$result-dropshadow</code> to the desired
shadow colour (try <code>$result-border-color</code>).</p>
<p>Switch off the drop shadow by setting <code>$result-dropshadow to the special value</code>none`.</p>
<pre><code>$result-dropshadow: $result-border-color;
$result-dropshadow: none;
</code></pre>
<h6>Thumbnails</h6>
<p>Each asset's thumbnail image will be displayed at this
size. Use a larger size, e.g. <code>9rem</code>, if the thumbnails are
important distinguishers for the assets in your collections;
use a smaller size, e.g. <code>5rem</code> or <code>3rem</code>, if thumbnails are
less help in distinguishing assets from each other.</p>
<p>If your thumbnails need pixel-perfect resolution, set this
to match the thumbnail size declared in your configuration XML
by default, <code>150px</code>).  To support high-resolution &quot;retina&quot;
displays, set your XML to double this number (e.g. use <code>300</code>
as the size in your portal XML, and <code>150px</code> as the size here).</p>
<p>TODO: confirm default pixel size</p>
<pre><code> /* $thumbnail-size: 7rem; */
$thumbnail-size: 150px;
</code></pre>
<p>Thumbnails also receive a border.</p>
<pre><code>$thumbnail-border-color: $content-background;
$thumbnail-border-width: 0.5rem;
</code></pre>
<p>Set this <code>thumbnail-fit</code> variable to how you want your
thumbnail images to fit their display space.</p>
<p>Mediaflux will create square thumbnails by default so in
most cases you can leave this set to <code>none</code>.</p>
<ul>
<li>
<p><code>none</code>: don't trim any of the thumbnail, shrinking it as
necessary so the entire thumbnail image fits into the box
(possibly leaving some empty space in the thumbnail box)</p>
</li>
<li>
<p><code>horizontal</code>: make the thumbnail exactly fit the width,
and either clip off the top and bottom (if it's too tall)
or add space at the top and bottom (if it's too short).</p>
</li>
<li>
<p><code>vertical</code>: make the thumbnail exactly fit the height,
and either clip the sides (if it's too wide) or add space
at the sides (if it's too narrow).</p>
<p>$thumbnail-fit: none;</p>
</li>
</ul>
<h6>Download button</h6>
<p>This styling allows three positions for the download button.</p>
<p>If downloading assets is a significant aspect of the portal
you're designing, use <code>wide</code> and the download button will
stretch the width of the result item box.</p>
<p>If you don't want the download button to appear, set this to
<code>hidden</code> (note that this is not a security measure -- assets
are still accessible).</p>
<p>The other two settings are <code>left</code> and <code>right</code> for aligning the
download button to one side or the other.  For significantly
visual assets use <code>right</code> to put the download button under
the thumbnail; for less visual assets, use <code>left</code> to align the
button under the asset's metadata.</p>
<pre><code>$download-button-position: wide;
</code></pre>
<p><svg class="diag"><use xlink:href="#diag"></use><use class="highlight" xlink:href="#diag-foot"></use></svg></p>
<h4>Footer</h4>
<p>The size and colour of the page footer.</p>
<pre><code>$footer-height: 3rem;
$footer-text-size: 1rem;

$footer-background: $page-background;
$footer-content-color: $page-color;
</code></pre>
<p>If you set <code>footer-fade</code> to true, the footer will appear
faded until the user hovers over it with their mouse.  This
helps to reduce the visual clutter of the footer. Note however
that mouse hover won't work on touch screens without a mouse,
so choose colours with readable contrast even when faded to
half opacity.</p>
<p>Disable fade by setting this variable to <code>false</code>.</p>
<pre><code>$footer-fade: true;
</code></pre>
<h2>End of variables</h2>
<p>For most customisations, this is as far as you need to go.
You can now run this document through a Sass compiler, and
you will get a CSS file you can apply to a Mediaflux portal.</p>
<h2>Setting sane defaults</h2>
<p>Web browsers don't agree in how to format many elements of a
web page.</p>
<p>Normalize.css is a third party project that provides a set
of CSS rules that ensure consistent base styles for all
browsers.  The following chunk of source code is all of the
<em>Normalize.css</em> rules -- there's no need to modify or
understand these rules.</p>
<pre><code> /*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */
button,hr,input{overflow:visible}
audio,canvas,progress,video{display:inline-block}
progress,sub,sup{vertical-align:baseline}
[type=checkbox],[type=radio],legend{box-sizing:border-box;padding:0}
html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
article,aside,details,figcaption,figure,footer,header,main,menu,nav,section{display:block}
h1{font-size:2em;margin:.67em 0}
figure{margin:1em 40px}
hr{box-sizing:content-box;height:0}
code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}
a{background-color:transparent;-webkit-text-decoration-skip:objects}
a:active,a:hover{outline-width:0}
abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}
b,strong{font-weight:bolder}
dfn{font-style:italic}
mark{background-color:#ff0;color:#000}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative}
sub{bottom:-.25em}
sup{top:-.5em}
audio:not([controls]){display:none;height:0}
img{border-style:none}
svg:not(:root){overflow:hidden}
button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}
button,select{text-transform:none}
[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}
[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}
[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:ButtonText dotted 1px}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{color:inherit;display:table;max-width:100%;white-space:normal}
textarea{overflow:auto}
[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}
[type=search]{-webkit-appearance:textfield;outline-offset:-2px}
[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}
::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}
summary{display:list-item}
[hidden],template{display:none}
 /*! end of normalize.css */
</code></pre>
<h5>Font family default</h5>
<p>Use the OS's default font if we can.  As of 2016, OS default
fonts are generally quite similar (humanist sans serifs with
a large x-height and open counters) so this is unlikely to
run into any significant size differences, but will look
familiar and modern to users.</p>
<pre><code>html {
	font-family:
		'.SFNSDisplay-Regular', /* &quot;display&quot; version of macOS font */
        -apple-system,       /* default macOS font for Safari/webkit */
        BlinkMacSystemFont,  /* default macOS font for Chrome/blink */
        &quot;Segoe UI&quot;,          /* default Windows font */
        &quot;Roboto&quot;,            /* default Android font */
        &quot;Fira Sans&quot;,         /* default Mozilla font */
        &quot;Droid Sans&quot;,        /* default older Android font */
        &quot;Helvetica Neue&quot;,    /* everyone else */
        sans-serif;          /* Blackberry users, lol */
}
</code></pre>
<h5>Font size default</h5>
<p>Use the CSS calc() feature to give the HTML tag a font size
that grows as the width of the viewport grows. This helps
the portal to display nicely on phone screens.</p>
<p>Requires
<code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, minimum-scale=1, initial-scale=1&quot;&gt;</code>
in the <code>head</code> of the page to stop a bit of &quot;helpful&quot; zooming
browsers on small screen phones do.</p>
<pre><code>html {
	overflow-x: hidden; /* avoid odd widths on narrow screens */

	@if ($text-size == small) {
		font-size: 13px; /* for browsers that don't support calc() */
		font-size: calc(11px + 0.35vw); /* grow font size on wider screen */
	} @else if ($text-size == large) {
		font-size: 19px; /* for browsers that don't support calc() */
		font-size: calc(17px + 0.35vw); /* grow font size on wider screen */
	} @else {
		font-size: 16px; /* for browsers that don't support calc() */
		font-size: calc(14px + 0.35vw); /* grow font size on wider screen */
	}
}
</code></pre>
<p>This tag sets the default text and background colour for
normal display, and when printing.  Colours are described in
the Variables section.</p>
<p>Refer to the appendix in this document for information about
the <code>@media</code> command.</p>
<pre><code>body {
    color: $page-color;
    background-color: $page-background;
}
@media print {
    body {
        color:$page-print-color;
        background: $page-print-background;
    }
}
</code></pre>
<h5>Heading size and spacing reset</h5>
<p>Set the font weight and size of all headings to be the same
as their containers, and reset all heading margins and
padding.</p>
<pre><code>h1, h2, h3, h4, h5, h6 {
    font-weight: inherit;
    font-size: inherit;
    margin: 0;
    padding: 0;
}
</code></pre>
<h5>Navigation spacing reset</h5>
<p>Navigation sections of a page usually occur in <code>ul</code> tags that
are inside <code>nav</code> tags.  So here we switch off padding,
margin, and bullets for <code>ul</code> tags inside <code>nav</code> tags.</p>
<pre><code>nav ul {
    list-style: none;
    margin: 0;
    padding: 0;
}
</code></pre>
<h5>Body wrapper</h5>
<p>The <code>mf-body-wrapper</code> class is used on a <code>div</code> that wraps the
entire page content. You might use it to set a page width. In
this styling however it isn't used.</p>
<pre><code>.mf-body-wrapper {
	// ...
}
</code></pre>
<h2>Buttons and form controls</h2>
<p>Buttons and similar form controls should look similar across
the portal.  This section defines the standard look.</p>
<p>Reset the margins and padding on forms.</p>
<pre><code>form {
	margin: 0;
	padding: 0;
}
</code></pre>
<p>This <code>input:not(...)</code> selector applies to text-type inputs,
even the cool ones like <code>type=&quot;number&quot;</code>.</p>
<pre><code>.mf-button, input:not([type=submit]):not([type=file]) {
	border: $control-border;
	background: $control-background;
	color: $control-content-color;
	height: $control-size;
	line-height: $control-size;
	border-radius: 0;
	font-family: inherit;
	cursor: pointer;
	display: inline-block;
	vertical-align: middle;
	padding: 0 0.5rem; // button padding is reset below
	border-radius: $control-corner-radius;
	transition: background-color 0.25s;

	&amp;:focus, &amp;:hover {
		background: $control-active-background;
		color: $control-active-content-color;
		outline: none;
	}
}

.mf-button {
	padding: 0 0.1rem;
	min-width: $control-size;
	text-align: center;
}
</code></pre>
<p>/*
.mf-button:hover {
color: rgb(100,149,237);
border-color: rgb(100,149,237);
}
*/</p>
<p><svg class="diag"><use xlink:href="#diag"></use><use class="highlight" xlink:href="#diag-head"></use></svg></p>
<h2>Page header</h2>
<p>All Mediaflux portal pages start with a <code>header</code> tag like
this: <code>&lt;header class=&quot;mf-header&quot; role=&quot;banner&quot;&gt;</code>. The <code>role</code>
attribute identifies the tag as containing site-oriented
content rather than page-specific content.</p>
<p>TODO: describe setting content in config file</p>
<p>This header is the appropriate place to include any
institution-wide banners, navigation bars etc.</p>
<pre><code>.mf-header {
	background: $header-background;
	color: $header-content-color;
	white-space: nowrap;
	text-align: center;
}
</code></pre>
<p>The portal plugin will not automatically generate a heading
or logo, but those items are supplied in the sample portal
configuration, so styling for them is supplied here.</p>
<pre><code>.mf-heading {
	color: inherit;
	display: inline-block;
	vertical-align: middle;
	font-size: $header-text-size;
	line-height: $header-height;
	font-weight: 200; /* very light font weight */
    letter-spacing: 0.1ch; /* slightly airy letter spacing */
}
</code></pre>
<p>Check the notes in the <em>Page layout variables</em> section for
information about setting the size of the logo.</p>
<pre><code>.mf-header-logo {
	display: inline-block;
	vertical-align: middle;
	margin: 0 1vw;
    @if ($resizable-logo) {
        max-height: $header-text-size;
        max-width: $header-text-size;
    } @else {
        height: $logo-height;
        width: $logo-width;
    }
}
</code></pre>
<p><svg class="diag"><use xlink:href="#diag"></use><use class="highlight" xlink:href="#diag-nav"></use></svg></p>
<h2>Page navigation</h2>
<p>The main page navigation – between static pages, or
sub-collections of assets – is included in the page as a <code>nav</code>
element with the class <code>mf-navbar</code>.</p>
<pre><code>.mf-navbar {
    font-size: $navbar-text-size;
	background: $navbar-background;
}
</code></pre>
<p>Inside the <code>nav.mf-navbar</code> is a <code>div.mf-navbar-container</code>.
This styling uses the <code>div</code> to set the display width for the
navigation links.</p>
<pre><code>.mf-navbar-container {
	max-width: $column-max-width;
	margin: 0 auto;
}
</code></pre>
<p>Inside the <code>div.mf-navbar-container</code> is a <code>ul.mf-nav-list</code>.
This contains one <code>li</code> for each nav link.  This styling uses
a flexbox layout to stretch the navlinks across the width of
the column.  On a wide display, they'll all have equal widths;
on a narrow display, they'll take the space they need.</p>
<pre><code>.mf-nav-list {
	display: flex;
	flex-direction: row;
	flex-wrap: wrap;
	border: 1px solid transparentize($navbar-content-color, 0.66);
	border-width: 0 1px;
}
.mf-nav-list li {
	color: $navbar-content-color;
	padding: 0 0.25em;
	text-align: center;
	flex-grow: 1;
	line-height: $navbar-height;
	transition: background-color 0.25s;
	&amp;:hover {
		background: $navbar-highlight-background;
		color: $navbar-highlight-content-color;
	}
	&amp;.mf-current-nav-item {
		background: $navbar-current-background;
		color: $navbar-current-content-color;
	}
	a {
		color: inherit;
		display: block;
		text-decoration: none;
	}
}
</code></pre>
<p><svg class="diag"><use xlink:href="#diag"></use><use class="highlight" xlink:href="#diag-content"></use></svg></p>
<h2>Page content</h2>
<p>All portal pages use a wrapper div around the main content
with a <code>mf-page</code> class, so this set of styling applies to the
content area on all page types.</p>
<p>The side padding given here is mostly hard to notice on wider
screens, but on narrow screens it is this padding that keeps
content from touching the edges of the screen.</p>
<pre><code>.mf-page {
	background: $content-background;
	color: $content-color;
	max-width: $column-max-width;
	margin: 0 auto;
	padding: 0 1rem 3rem;

	/* clearfix: http://cssmojo.com/the-very-latest-clearfix-reloaded/ */
	&amp;::after { content: &quot; &quot;; display: block; clear: both; }
}
</code></pre>
<p><svg class="diag"><use xlink:href="#diag"></use><use class="highlight" xlink:href="#diag-foot"></use></svg></p>
<h2>Footer</h2>
<p>All Mediaflux portal pages end with a <code>footer</code> tag like this:
<code>&lt;footer class=&quot;mf-footer&quot;&gt;</code>.  The content is supplied from
the configuration file; this styling assumes that the footer
content is a single line of text.</p>
<pre><code>.mf-footer {
	background: $footer-background;
	color: $footer-content-color;
	font-size: $footer-text-size;
	line-height: $footer-height;
	text-align: center;
	border-top: 1px solid $footer-content-color;
	white-space: nowrap;
</code></pre>
<p>This section allows the footer to fade in and out according
to mouse hover, if the <code>$footer-fade</code> variable is set to
<code>true</code>.</p>
<pre><code>    @if ($footer-fade) {
		opacity: 0.5;
		transition: 0.25s;
		&amp;:hover {
			opacity: 1;
		}
    }
}
</code></pre>
<p><svg class="diag"><use xlink:href="#diag"></use><use class="highlight" xlink:href="#diag-content"></use></svg></p>
<h2>Static page content</h2>
<p>Static pages are laid out as a heading, rendered as a <code>h1</code> tag
like this: <code>&lt;h1 class=&quot;mf-static-page-title&quot; id=&quot;mf-page-title&quot;&gt;</code>
followed by the content in a <code>div</code> tag with a
<code>mf-static-page-content</code> class.</p>
<p>On a static page, the content wrapping div that carries a
<code>mf-page</code> class has an additional class of <code>mf-static-page</code>.
.mf-static-page {
padding-top: 2rem;
}</p>
<p>The title is styled in a manner similar to a <code>h4</code> tag in the
content (the position and spacing of the title means its
significance is clear without having to make it any larger).</p>
<p>Like the in-content headings, this styling uses the CSS
<code>calc(...)</code> function to scale along with the size of the
window.</p>
<pre><code>.mf-static-page-title {
	color: $dark-brand-color;
	font-size: 1.333rem;
	font-size: calc(1.333rem + 0.666vw);
	font-weight: 600;
	padding: 1rem 0;
}
</code></pre>
<p>The content of a static portal page can be any HTML specified
in the config file, so the rules below apply some generally
appropriate styles to standard HTML content.</p>
<pre><code>.mf-static-page-content {
</code></pre>
<h5>Text sizing and spacing</h5>
<p>Set a default line height, and give headings and paragraphs
some padding.  Headings get tighter line spacing, and heading
levels that are drawn larger than normal text get coloured with
the page's branding colour.</p>
<pre><code>	line-height: 1.5;

	p {
		padding: 0.5em 0;
		margin: 0;
	}

	h1, h2, h3, h4 {
		color: $dark-brand-color;
	}

	h1, h2, h3, h4, h5, h6 {
		line-height: 1.15;
		padding: 1em 0 0.5rem;
		margin: 0;
	}
</code></pre>
<p>Heading sizes are calculated here starting with a &quot;Major
Third&quot; proportion of 5:4, essentially multiplying each
size by 1.25 to get the next.</p>
<p>This web tool is a convenient way to generate scaled sizes:
<a href="http://type-scale.com/?scale=1.250&amp;font-family=BlinkMacSystemFont">type-scale.com</a></p>
<p><code>h5</code> and <code>h6</code> headings are both the same size as normal text;
<code>h5</code>s are rendered very bold (using <code>font-weight: 800</code>), and
<code>h6</code>s are italicised.</p>
<p>The <code>calc(...)</code> function is used here to make the headings
proportionally larger on large screens.  This means that as
page size increases, heading size will increase over and
above the standard font size increase.  The effect of this
is clean clear headings on a desktop, but still readable
headings on phone screens.</p>
<p>Here the additional heading size is a doubling proportion
of the page width (2:1).</p>
<pre><code>	h1 { font-size: 2.441rem; font-size: calc(2.441rem + 1.600vw); font-weight: 100; }
	h2 { font-size: 1.953rem; font-size: calc(1.953rem + 0.800vw); font-weight: 200; }
	h3 { font-size: 1.563rem; font-size: calc(1.563rem + 0.400vw); font-weight: 400; }
	h4 { font-size: 1.250rem; font-size: calc(1.250rem + 0.200vw); font-weight: 600; }
	h5 { font-size: 1.000rem; font-size: calc(1.000rem + 0.000vw); font-weight: 800; }
	h6 { font-size: 1.000rem; font-size: calc(1.000rem + 0.000vw); font-style: italic; }
</code></pre>
<h5>Monospaced text</h5>
<p>Add some background shading to <code>code</code>, <code>pre</code> preformatted
text, and <code>kbd</code> keyboard input to help distinguish them from
normal text.</p>
<p>Text inside <code>&lt;pre&gt;</code> tags also get made slightly smaller, with
tighter line spacing.</p>
<pre><code>	code, pre, kbd {
		background: $content-shading;
	}
	code {
		padding: 0.1em 0.33em;
		border-radius: 0.2em;
	}
	pre {
		font-size: 90%;
		line-height: 1.3;
		max-width: 100%;
		overflow: auto;
		margin: 0;
	}
</code></pre>
<h5>Block quotes</h5>
<p>Blockquotes are indented, with a left border, and a big curly
quote.  The text is slightly smaller and has tighter line
spacing.</p>
<p>If you're a developer or grammarian you might feel
uncomfortable about the lack of closing quotes; I do too, but
it's cleaner and less cluttered looking without, and there's
a fairly strong convention for having just an opening quote.</p>
<pre><code>	blockquote {
		font-size: 90%;
		line-height: 1.3;
		margin: 0.5em 0;
		padding: 1em 0 1em 2em;
		border-left: 0.33em solid $content-shading;
	}
</code></pre>
<p>Tiny detail: if you use <code>&lt;p&gt;</code> tags in your blockquote, the
paragraph padding on top makes the blockquote's top padding
look too big.  So this line strips padding from the first
<code>&lt;p&gt;</code> in a blockquote.</p>
<pre><code>	blockquote &gt; p:first-child {
		padding-top: 0;
	}
</code></pre>
<p>For bigger quote marks, make this number higher.  To remove
the quote marks, you can delete the following section of SCSS.</p>
<pre><code>	$blockquote-quote-size: 4;

	blockquote { position: relative; }
	blockquote:before, blockquote:after {
		position: absolute;
		top: 0.1em / $blockquote-quote-size;
		opacity: 0.1;
		font-size: 1em * $blockquote-quote-size;
		font-family: cursive;
		font-weight: bold;
		font-style: italic;
	}
	blockquote:before {
		content: '\201c'; /* left 66 quotes */
		left: 0.1em / $blockquote-quote-size;
	}
</code></pre>
<p>This next section, commented out, is how you would add a
closing quote mark to blockquotes.  Trust me though, it looks
better without.</p>
<pre><code>	// blockquote:after {
	// 	opacity: 0.05;
	// 	content: '\201d'; /* right 99 quotes */
	// 	right: 0.4em / $blockquote-quote-size;
	// }
</code></pre>
<h5>Lists</h5>
<p>Bulletted lists are common in general content.  These rules
control space between list items for normal lists and lists
inside other lists.</p>
<pre><code>	ul, ol { padding: 0.25em 0 0.25em 0; }
	ul ul, ol ol { padding: 0 0 0 1.5em; }
	li {
		padding: 0.1em 0;
		list-style-position: inside;
	}
</code></pre>
<p>Set the progression of bullets to square, circle, disc, square.</p>
<pre><code>	li { list-style-type: square; }
	li li { list-style-type: circle; }
	li li li { list-style-type: disc; }
	li li li li { list-style-type: square; }
</code></pre>
<p>This final closing bracket is the end of the formatting rules
for static page content.</p>
<pre><code>}
</code></pre>
<h2>Collection page content</h2>
<p>On a collection page, the content wrapping div that carries a
<code>mf-page</code> class has an additional class of <code>mf-list-page</code>.</p>
<p>In this styling there is a gap between the navbar above
and the collection bar.</p>
<pre><code>.mf-list-page {
	padding-top: 2rem;
}
</code></pre>
<p><svg class="diag"><use xlink:href="#diag"></use><use class="highlight" xlink:href="#diag-collbar"></use></svg></p>
<h3>Collection bar</h3>
<p>This page section is a sort of heading area for the list of
items being displayed.</p>
<pre><code>.mf-collection-bar {
	background: $collection-bar-background;
	color: $collection-bar-content-color;
	padding: 1rem;
	border-bottom: solid $collection-bar-content-color;
	border-bottom-width: $collection-bar-border-width;

	/* clearfix: http://cssmojo.com/the-very-latest-clearfix-reloaded/ */
	&amp;::after { content: &quot; &quot;; display: block; clear: both; }
}
</code></pre>
<p>The collection bar has two parts, a title for the current
collection, and some controls.  This style puts the title on
the left, the controls on the right, and makes the bar the
right height to fit the controls.</p>
<p>The title gets it size from the controls.  This is the most
genuine &quot;title&quot; in the sense that it describes the content
the user is seeing, so although this styling avoids bold
fonts on big headings, this title is the bold exception that
makes it all worth it :)</p>
<pre><code>.mf-collection-title {
	line-height: $control-size;
	float: left;
	font-size: $control-size * 0.66;
	font-weight: 800;
}
</code></pre>
<p>The collection actions includes a search box and a &quot;make new
asset&quot; button.  This styling pushes it all to the right edge,
and gives each item a bit of space on the right side.</p>
<pre><code>.mf-collection-actions {
	float: right;
	text-align: right;
}
.mf-collection-actions &gt; * {
	display: inline-block;
	margin-left: 1rem;
}
</code></pre>
<p>The width of the search box can be up to <code>22em</code>s, but the
<code>max-width</code> line will make it shorter so it's never wider
then 60% of the width of the page.</p>
<p>If you prefer a search box with rounded ends -- a common
convention a few years ago, particularly in Mac software --
un-comment the line about <code>border-radius</code>.</p>
<p>The search box includes an SVG icon of a magnifying glass.
The SVG image is included inline here.</p>
<p>The <code>text-shadow</code> gives the searched-for text a nice clean
edge even when it overlaps the background icon.</p>
<pre><code>.mf-action-search input[type=&quot;search&quot;] {
	width: 22em;
	max-width: 60vw;
	// border-radius: $control-size / 2;
	background-image: url('data:image/svg+xml;utf8,&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 11 11&quot; stroke=&quot;#{$control-content-color}&quot;&gt;&lt;circle fill=&quot;none&quot; cx=&quot;4&quot; cy=&quot;4&quot; r=&quot;3&quot;/&gt;&lt;line x1=&quot;6&quot; y1=&quot;6&quot; x2=&quot;9.5&quot; y2=&quot;9.5&quot;/&gt;&lt;/svg&gt;');
    background-size: $control-size * 0.5, $control-size * 0.5;
    background-position: right $control-size/4 top $control-size/4;
    background-repeat: no-repeat;
	text-shadow:
		0 0 2px $control-background,
		0 0 4px $control-background,
		0 0 6px $control-background;
}
</code></pre>
<p>The 'new asset' button by default simply shows the word &quot;new&quot;.
The following styling replaces that text with a symbol.
If you prefer the 'new asset' button to show the text instead
of the symbol, remove the following section.</p>
<p>Good options for a new button include:</p>
<ul>
<li><code>274a</code>: ❊ eight teardrop-spoked propeller asterisk</li>
<li><code>2600</code>: ☀ black sun with rays</li>
<li><code>263c</code>: ☼ white sun with rays</li>
</ul>
<p>..or use an SVG image.</p>
<pre><code>.mf-new-item-button {
    min-width: $control-size;
    position: relative;
    overflow: hidden;
    color: rgba(0,0,0, 0);
    &amp;:hover { color: rgba(0,0,0, 0); }
    &amp;:before {
        color: $control-content-color;
        content: '\274a'; /* 274a: ❊ eight teardrop-spoked propeller asterisk */
        position: absolute;
        top: 0; bottom: 0; left: 0; right: 0;
    }
}
</code></pre>
<p><svg class="diag"><use xlink:href="#diag"></use><use class="highlight" xlink:href="#diag-side"></use></svg></p>
<h2>Sidebar</h2>
<p>The sidebar holds controls allowing the user to filter the
list of items.  To fit properly on mobile screens, the sidebar
gets styled here as if it will sit across the top of the
content; later, this styling will use a <code>@media</code> query to move
the sidebar to the left side when the screen is wide enough.</p>
<p>The style rules immediately below are simply setting the
colours.</p>
<pre><code>.mf-collection-sidebar {
	background: $sidebar-background;
	color: $sidebar-content-color;
}
</code></pre>
<p>Each facet in the sidebar is contained within a <code>fieldset</code> tag
that looks like <code>&lt;fieldset class=&quot;mf-facet-selector&quot;&gt;</code>.</p>
<pre><code>.mf-facet-selector {
	background: $sidebar-facet-background;
	border: none;
	border-top: $control-border;
	margin: 2rem 0;
}
</code></pre>
<p>The name given to the facet uses a <code>legend</code> tag like this:
<code>&lt;legend class=&quot;mf-facet-title&quot;&gt;</code>.</p>
<pre><code>.mf-facet-title {
	border-radius: 2px;
	padding: 0.33em 0.5em;
}
</code></pre>
<p>Individual selectable facets within a facet selection fieldset
are wrapped in label tags like this:
<code>&lt;label class=&quot;mf-facet mf-facet-checkbox&quot;&gt;</code> ..or if it is a
&quot;choose one only&quot; type facet, using <code>mf-facet-radio</code> instead
of <code>mf-facet-checkbox</code>.</p>
<p>This styling also gives the facet a highlight using the colour
selected for <code>$control-active-background</code> when hovered over
with a mouse.</p>
<p>A final visual enhancement is using <code>transition</code>s to fade the
background highlight out.</p>
<pre><code>.mf-facet {
	display: block;
	padding-left: 1em;
	transition: background-color 0.25s;

	&amp;:hover {
		background: $control-active-background;
		transition: background-color 0s;
	}
}
</code></pre>
<p>The span tag contains the labelling text of the facet; here
the height and alignment are set to match the checkbox or
radio button.</p>
<pre><code>.mf-facet span {
	padding-left: 0.33em;
	display: inline-block;
	vertical-align: middle;
}
</code></pre>
<h3>Sidebar, on a wide screen</h3>
<p>The <code>@media</code> statement below means that the rules inside it
will only apply when the page is at least the specified width.</p>
<p>Here, the sidebar width is set to the configured width (rather
than using the full width of the screen), and the sidebar is
aligned to the left.</p>
<pre><code>@media (min-width: $sidebar-width + $content-min-width) {
	.mf-collection-sidebar {
		width: $sidebar-width;
		float: left;
	}
}
</code></pre>
<p><svg class="diag"><use xlink:href="#diag"></use><use class="highlight" xlink:href="#diag-nav"></use></svg></p>
<h2>Page navigation</h2>
<p>Page navigation buttons are constructed as a <code>ul</code> tag inside
a <code>nav</code>.  Each page button is a <code>li</code> inside the <code>ul</code>.</p>
<pre><code>.mf-collection-paging {
	padding: 2rem 0;
}

.mf-collection-paging ul {
	text-align: right;
}

.mf-collection-paging li {
	display: inline-block;
	margin: 0 0 0 0.5rem;
}
</code></pre>
<p>Some of the page navigation buttons get their text replaced
with icons.  This styling uses Unicode characters.</p>
<p>All the icon buttons are made square and their text content
hidden.  Then <code>:before</code> content is added with the appropriate
unicode character.</p>
<p>This first block does all the common formatting for the icon
buttons.</p>
<pre><code>.mf-collection-paging .mf-up-button,
.mf-collection-paging .mf-refresh-page-button,
.mf-collection-paging .mf-prev-page-button,
.mf-collection-paging .mf-next-page-button
{
	width: $control-size;
	position: relative;
	overflow: hidden;
	color: rgba(0,0,0, 0);
	&amp;:before {
		color: $control-content-color;
		content: '\25ef'; /* 25ef: ◯ LARGE CIRCLE */
		position: absolute;
		top: 0; bottom: 0; left: 0; right: 0;
		// background: inherit;
	}
}
</code></pre>
<p>This block adds the custom icons to each button.</p>
<pre><code>.mf-collection-paging {
	.mf-up-button:before           { content: '\21a5' /* 21a5: ↥ UPWARDS ARROW FROM BAR */ }
	.mf-refresh-page-button:before { content: '\21bb' /* 21bb: ↻ CLOCKWISE OPEN CIRCLE ARROW */ }
	.mf-prev-page-button:before    { content: '\2190' /* 2190: ← LEFTWARDS ARROW */ }
	.mf-next-page-button:before    { content: '\2192' /* 2192: → RIGHTWARDS ARROW */ }
}
</code></pre>
<h3>Page navigation, on a wide screen</h3>
<p>The <code>@media</code> statement below means that the rules inside it
will only apply when the page is at least the specified width.</p>
<p>Here the page navigation buttons are given a large left margin
(to allow the sidebar to fit into that space).</p>
<pre><code>@media (min-width: $sidebar-width + $content-min-width) {
	.mf-collection-paging {
		margin-left: $sidebar-width;
		padding-left: 1rem;
	}
}
</code></pre>
<p><svg class="diag"><use xlink:href="#diag"></use><use class="highlight" xlink:href="#diag-res"></use></svg></p>
<h2>Listing results</h2>
<p>There are two types of results; a list of assets, or a list of
collections.  They share a wrapping div
(<code>&lt;div class=&quot;mf-result-list&quot;&gt;</code>), but the nested <code>ul</code>s differ
(<code>&lt;ul class=&quot;mf-asset-list&quot;&gt;</code> vs
<code>&lt;ul class=&quot;mf-collection-list&quot;&gt;</code>).</p>
<p>This styling block applies to both lists, and removes the
default spacing.</p>
<pre><code>.mf-result-list {
	padding: 0;
}

.mf-result-list &gt; ul {
    padding: 0;
    margin: 0;
}
</code></pre>
<h3>A single result</h3>
<p>This addresses the content of the single result in the list.</p>
<pre><code>.mf-listed-result {
	position: relative; /* for play button positioning */
	display: block;
    background: $result-background;
    margin: $result-padding 0;
    padding: $result-padding;
	border: 1px solid rgba(0,0,0, 0);
	border-width: $result-border-width;
	border-top-width: $result-top-border-width; 
	border-color: $result-border-color;
	border-radius: $result-corner-radius;

	@if ($result-dropshadow != none) {
		box-shadow: 0 0.33rem 1rem -0.25rem $result-dropshadow;
	}

	/* clearfix: http://cssmojo.com/the-very-latest-clearfix-reloaded/ */
	&amp;::after { content: &quot; &quot;; display: block; clear: both; }

}
.mf-listed-result:first-child {
	// removes the top margin for the first result
	margin-top: 0;
}
</code></pre>
<p>The thumbnail image is contained in a
<code>&lt;div class=&quot;mf-result-thumbnail-wrapper&quot;&gt;</code>, which is used
here to set the size of the thumbnail.</p>
<p>Other style rules given here supply the border and a subtle
gradient background for cases where the thumbnail doesn't fill
the space.</p>
<pre><code>.mf-result-thumbnail-wrapper {
    float: right;
    margin: 0 0 $result-padding 0.5rem;
    position: relative;
    width: $thumbnail-size;
    height: $thumbnail-size;
    overflow: hidden;
    border: solid $thumbnail-border-width $thumbnail-border-color;
	background-color: $result-background;
	background-image: radial-gradient(
		transparentize($thumbnail-border-color, 0.8),
		transparentize($thumbnail-border-color, 0.2)
	);
}
</code></pre>
<p>These style rules centre the thumbnail and apply the effect
of the <code>$thumbnail-fit</code> variable set earlier.</p>
<pre><code>.mf-result-thumbnail-wrapper img {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);

	@if ($thumbnail-fit == vertical) {
		height: $thumbnail-size;
	} @else if ($thumbnail-fit == horizontal) {
		width: $thumbnail-size;
	} @else {
		max-width: $thumbnail-size;
		max-height: $thumbnail-size;
	}
}
</code></pre>
<p>The name, or title, of the result gets the same sizing as a
<code>h4</code> tag in static content.  If you really want result item
titles to be a different colour, add a <code>color</code> rule to this
section of styling.</p>
<pre><code>.mf-result-title {
	color: $dark-brand-color;
	font-size: 1.250rem;
	font-size: calc(1.250rem + 0.200vw);
	font-weight: 600;

	margin: ($result-padding/3) 0 ($result-padding/1.5);
}
</code></pre>
<p>The metadata fields applicable to a result are included in
a <code>&lt;ul class=&quot;.mf-result-metadata-list&quot;&gt;</code> list, one <code>li</code> tag
per field.  Inside the <code>li</code> is a
<code>&lt;h3 class=&quot;.mf-metadata-field&quot;&gt;</code> with the name of the field,
and a <code>&lt;div class=&quot;.mf-metadata-value&quot;&gt;</code> containing the value.</p>
<p>The styling applied here uses a tabular display, with the
field names in a left column, and the values in the right
column.</p>
<p>The field name column is constrained to take at most 30% of
the available width; if your metadata fields have unusually
long names, you can remove or adjust the <code>max-width: 30%</code>
rule from the <code>.mf-metadata-field</code> styling block.</p>
<pre><code>.mf-result-metadata-list {
    display: table;
	padding: 0;
	margin-top: 1rem;
}
.mf-result-metadata-list li {
    padding: 0.1rem 0;
    margin: 0;
    display: table-row;
}
.mf-metadata-field {
	display: table-cell;
    font-weight: 600;
	// font-size: 90%;
	// opacity: 0.8;
	// text-transform: uppercase;
    // font-weight: 800;
    max-width: 30%;
    padding: 0.25rem;
    text-align: right;
}
.mf-metadata-value {
	display: table-cell;
    padding-left: 0.5rem;
}
</code></pre>
<p>The Download and Play buttons, if present, are the last tags
in the result item's <code>li</code>.</p>
<p>This styling shows the download button at the bottom of
the result item.  Depending on the <code>download-button-position</code>
variable set earlier, it can be left aligned, right aligned,
hidden, or stretch the whole width of the result item.</p>
<pre><code>.mf-download-button {
	display: block;
	padding-left: $result-padding;
	padding-right: $result-padding;
	margin: 0.66rem auto 0;

	@if ($download-button-position == hidden) {
		display: none;
	} @else if ($download-button-position == left) {
		margin-left: 0;
	} @else if ($download-button-position == right) {
		margin-right: 0;
	} @else {
		width: 100%;
	}
}
.mf-download-button:before {
	/* 21e9: ⇩ downwards white arrow */
	/* 2b07: ⬇ downwards black arrow */
	/* 21a7: ↧ downwards arrow from bar */
	/* 2193: ↓ downwards arrow */
	/* 2913: ⤓ downwards arrow to bar */
	/* 21d3: ⇓ downwards double arrow */
	content: '\2b07'; /* 2b07: ⬇ downwards black arrow */
	margin-right: $result-padding/2;
}
</code></pre>
<p>The Play button appears when the asset is a playable media
type, like a movie or audio recording. When present, it is
after the Download button.</p>
<p>This styling relocates the play button to hover over the
asset thumbnail.</p>
<pre><code>.mf-play-button {
	position: absolute;
	size: $thumbnail-size;
	right: $result-padding;
	top: $result-padding;
	box-sizing: content-box;
	padding: 0;
	border: solid $thumbnail-border-width transparent;
	background: transparent;
	color: transparent;
	width: $thumbnail-size;
	height: $thumbnail-size;
}
.mf-play-button:hover {
	background: transparent;
}
.mf-play-button::before {
	position: absolute;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;
	font-size: ($thumbnail-size / 2);
	line-height: $thumbnail-size;
	text-align: center;
	/* 25b6: ▶ black right-pointing triangle */
	/* 25ba: ► black right-pointing pointer */
	content: '\25b6'; /* 2b06: ▶ black right-pointing triangle */
	color: $control-content-color;
	text-shadow: 0 0 3px $control-background;
}
.mf-play-button:hover::before {
	color: $control-active-content-color;
	background-color: transparentize($control-active-background, 0.5);
}
</code></pre>
<h3>Listing results, on a wide screen</h3>
<p>The <code>@media</code> statement below means that the rules inside it
will only apply when the page is at least the specified width.</p>
<p>Here the result list is given a large left margin (to allow
the sidebar to fit into that space).  This section is similar
to the wide-screen formatting for the page navigation.</p>
<pre><code>@media (min-width: $sidebar-width + $content-min-width) {
	.mf-result-list {
		margin-left: $sidebar-width;
		padding-left: $result-padding;
	}
}
</code></pre>
<p><svg class="diag"><use xlink:href="#diag"></use><use class="highlight" xlink:href="#diag-popup"></use></svg></p>
<h2>Pop-up Dialogues</h2>
<p>A Mediaflux portal can allow the user to add a new asset. This
is handled with a form that pops up over the portal web page.</p>
<p>The form is contained in a wrapper
<code>&lt;div class=&quot;mf-modal-wrapper&quot;&gt;</code> that itself contains a
<code>&lt;div class=&quot;mf-modal-container&quot;&gt;</code> which contains the form.</p>
<p>This styling uses the <code>.mf-modal-wrapper</code> to obscure the
normal web page in the background, and the
<code>.mf-modal-container</code> to define the form.</p>
<pre><code>$modal-bg-bar-color-A: transparentize($brand-highlight-shading, 0.1);
$modal-bg-bar-color-B: transparentize($content-background, 0.1);
.mf-modal-wrapper {
	display: block;
	position: fixed;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;
	background: $modal-bg-bar-color-A;
	background: repeating-linear-gradient(315deg,
		$modal-bg-bar-color-A,
		$modal-bg-bar-color-A 15px,
		$modal-bg-bar-color-B 15px,
		$modal-bg-bar-color-B 30px
	);
	overflow: scroll;
	overflow-x: hidden;
	overflow-y: scroll;
	z-index: 1000000;
}

.mf-modal-container {
	box-sizing: border-box;
	background: $brand-shading;
	width: min-content;
	min-width: 30rem;
	max-width: 80vw;
	max-height: 90vh;
	overflow: scroll;
	margin: 5vh auto;
	padding: 0 1rem;
	border: 1px solid $brand-color;
	border-radius: 0.5rem;
	box-shadow: 0 1rem 3rem -0.5rem #000;
}
</code></pre>
<p>The portal adds the <code>mf-modal-show</code> class to the body tag when
there's a modal dialogue showing. This rule uses that class to
make sure the content in the background doesn't scroll when
you're trying to scroll a long dialogue.</p>
<p>This doesn't always work (often, the page behind the modal
dialogue will scroll instead of staying fixed) thanks to a
quirk of the GWT system that Mediaflux uses to produce Portal
sites.</p>
<pre><code>body.mf-modal-show {
	max-height: 100%;
	overflow: hidden;
}
</code></pre>
<h4>Media playback dialogue</h4>
<p>Mediaflux uses this dialogue to display &quot;playable&quot; media in
a player format.</p>
<pre><code>.mf-media-player-wrapper {
	padding-top: 1rem;
	padding-bottom: 1rem;
}
</code></pre>
<p>The media player dialogue includes a close button above the
actual media. We move that to the right side, and change its
text to be an X.</p>
<pre><code>.mf-modal-controls {
	margin-bottom: 1rem;
	/* clearfix: http://cssmojo.com/the-very-latest-clearfix-reloaded/ */
	&amp;::after { content: &quot; &quot;; display: block; clear: both; }
}
.mf-modal-controls .mf-close-button {
    width: $control-size;
	float: right;
	position: relative;
    overflow: hidden;
    color: rgba(0,0,0, 0);
    &amp;:hover { color: rgba(0,0,0, 0); }
    &amp;:before {
        color: $control-content-color;
		/* 2715: ✕ multiplication sign */
		/* 2716: ✖ heavy multiplication sign */
        content: '\2716'; /* 2716: ✖ heavy multiplication sign */
        position: absolute;
        top: 0; bottom: 0; left: 0; right: 0;
    }
}
</code></pre>
<p>Ensure the size of the browser's playback area doesn't exceed
the size of the window.</p>
<pre><code>.mf-modal-container video,
.mf-modal-container audio {
	max-width: 100%;
}
</code></pre>
<h4>New asset dialogue</h4>
<p>The 'new asset' pop-up dialogue has three main sections. The
top section includes a dense set of metadata edit fields that
are unfortunately very difficult to style pleasantly.</p>
<p>The middle section is where the user can drag and drop files
to be uploaded to become the asset being created.</p>
<p>The final section are the two control buttons for either
creating the asset, or cancelling the dialogue.</p>
<pre><code>.mf-modal-container fieldset {
	border: none;
	padding: 0;
	margin: 0;
	text-align: center;
}
</code></pre>
<h5>Metadata entry</h5>
<p>This next section attempts to neaten up the metadata field
section. This is one of the few areas of Mediaflux Portals
that was not cleaned up in the revision pf Portals in late
2016, and this section stops the New Asset form from adapting
appropriately to narrower screens. Some modest formatting is
applied here.</p>
<pre><code>.mf-modal-container fieldset:first-of-type {
	/* shading the un-stylable area makes it easier to deal with problem reports */
	background-color: rgba(0,0,0, 0.1);
	margin-top: 1rem;
	padding: 1rem 0;
}
.mf-modal-container .mf-asset-metadata-fieldset &gt; div {
	max-width: max-content;
	margin: 0 auto; /* centre the unstyle-able block */
	&amp; .gwt-Label {
		/* try to position labels in line */
		position: relative; top: 8px;
		min-width: 6em;
		padding-right: 0.33em;
	}
	&amp; table table table img {
		/* try to position the dropdown images in line */
		position: relative; top: 3px; 
	}
}
</code></pre>
<h5>Files to upload</h5>
<p>The middle section is where the asset's file can be dragged;
a <code>&lt;div class=&quot;mf-file-upload-info&quot;&gt;</code> receives dragged files.</p>
<pre><code>fieldset.mf-file-upload-item {
	padding: 1rem 0;
	margin-top: 2rem;
}
.mf-file-upload-info {
	background: $content-background;
	color: $content-color;
	min-height: 3rem;
	padding: 0.5rem;
	border: 0.33rem dotted $control-border-color;
	border-radius: 0.66rem;
	text-align: center;
}
</code></pre>
<p>The style displays heavy angled brackets before and after
the &quot;drag files here&quot; message, but you could use other
typographic decorations for a more ornamental look.</p>
<ul>
<li><code>276d</code> and <code>276c</code>: ❭ ❬ light angle quotes/brackets</li>
<li><code>276f</code> and <code>276e</code>: ❯ ❮ heavy angle quotes/brackets</li>
</ul>
<p>Alternatively remove the <code>&amp;:before</code> and <code>&amp;:after</code> lines
below for no ornaments.</p>
<pre><code>.mf-file-upload-info .mf-form-item-prompt {
	display: block;
	color: $control-border-color;
	text-transform: lowercase;
	padding: 0.33rem 0 1rem;
	&amp;:before { content: '\276f\0020' }
	&amp;:after  { content: '\0020\276e' }
}
</code></pre>
<p>Files ready to be uploaded are listed in a table.  This gives
that table shaded headings and a little padding around the
content.</p>
<pre><code>.mf-file-upload-table {
	font-size: 80%;
	width: 100%;
}
.mf-file-upload-table th {
	font-size: 80%;
	background-color: $content-shading;
	text-align: left;
	border-bottom: $control-border;
	padding: 0.1rem 0.33rem;
}
.mf-file-upload-table td {
	text-align: left;
	padding: 0.33rem;
}
</code></pre>
<p>The button that clears the file list is displayed full width.</p>
<pre><code>.mf-clear-files-button {
	display: block;
	padding-left: $result-padding;
	padding-right: $result-padding;
	margin: 0.66rem auto 0;
	width: 100%;
}
</code></pre>
<h5>Form controls</h5>
<p>The third section of the form holds the cancel and create
buttons. In keeping with dialogue conventions, these buttons
are right-aligned.</p>
<pre><code>fieldset.mf-form-actions-item {
	padding: 1rem 0;
	margin-top: 1rem;
	text-align: right;
}
.mf-form-actions-item .mf-button {
	padding-left: $result-padding;
	padding-right: $result-padding;
	margin-left: $result-padding;
}
</code></pre>
<h2>Appendix: Sass and CSS refresher</h2>
<h3>CSS</h3>
<p>todo intro</p>
<h5>CSS Units: em, rem, vw...</h5>
<p>CSS lets the sizes of things be defined in a variety of units.
Some of these are defined here.  Refer to
<a href="https://developer.mozilla.org/en/docs/Web/CSS/length">Mozilla's documentation</a>
for futher information.</p>
<ul>
<li><strong><code>px</code></strong>: Pixels.  <code>1px</code> is a single pixel.</li>
<li><strong><code>em</code></strong>: Approximately the height of the current font.  So
<code>1em</code> in a heading with big text is larger than <code>1em</code> in a
footer that has smaller text.</li>
<li><strong><code>rem</code></strong>: &quot;Root <code>em</code>&quot;, the size of <code>1em</code> in the page's
default font size.</li>
<li><strong><code>vw</code></strong>: one percent of the width of the browser. So a <code>vw</code>
is smaller when your screen is narrower, and <code>50vw</code> is half
the width of your window.</li>
</ul>
<h5>CSS colours</h5>
<p>CSS can define colour in several ways.</p>
<ul>
<li><strong><code>rgb([red], [green], [blue])</code></strong>: Where <code>[red]</code>, <code>[green]</code>,
and <code>[blue]</code> are numbers from 0 to 255. The colour is the
result of combining red, green and blue in the given
amounts. For example <code>rgb(255,165,0)</code> is orange (a lot of
red, some green, and no blue).</li>
<li><strong><code>rgba([red], [green], [blue], [alpha])</code></strong>: Where <code>[alpha]</code>
is a number from 0 to 1.  Like <code>rgb(...)</code> but also includes
some degree of transparency. An alpha of 0.0 is not at all
transarent; an alpha of 1.0 is completely transparent. E.g.
<code>rgba(255,165,0, 0.5)</code> is a semitransparent orange.</li>
<li><strong><code>#rrggbb</code></strong>: where each <code>r</code>, <code>g</code>, and <code>b</code> is a hexadecimal
digit (one of <code>1 2 3 4 5 6 7 8 9 a b c d e f</code>).  This is
another way to say the red, green and blue components of a
colour, with <code>rr</code> the hexadecimal amount of red from <code>00</code> to
<code>ff</code>, etc.  Eg. <code>#ffa500</code> is <code>ff</code> red, <code>a5</code> green, and <code>00</code>
blue -- the same orange as before.</li>
<li><strong><code>#rgb</code></strong>: same as <code>#rrggbb</code> but with only three digits.<br />
This is a shortcut version of <code>#rrggbb</code>; each digit gets
doubled to find the real result.  Eg. <code>#fa0</code> is <code>ff</code> red,
<code>aa</code> green, and <code>00</code> blue, which is close to our example
orange.</li>
</ul>
<h5>Using <code>@media</code> to target CSS</h5>
<p>The CSS language allows designers to write CSS that will apply
only in certain situations, such as when the page is being
printed, or if the screen the page is displayed on is a
particular width.  The <code>@media</code> command provides this ability.</p>
<p>This is often used to display pages with multiple columns on
wider screens, and a single column when the screen is narrow.</p>
<p>The
<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries">Mozilla developer documentation</a>
has more.</p>
<h5>calc(...)</h5>
<p>todo</p>
<h5>linear-gradient(...)</h5>
<p>todo</p>
<h3>SCSS</h3>
<p>todo intro</p>
<h5>transparentize()</h5>
<p>todo</p>
</div>
<!-- source highlighting -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/components/prism-scss.min.js"></script>
</body>
</html>