<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/prism/1.4.1/themes/prism.css">
<style>
  html {
    font-family: lato, sans-serif;
    font-size: 14px;
    font-size: calc(14px + 0.2vw);
    line-height: 1.5;
    background: white;
    padding: 0;
    margin: 0;
  }

  body {
    max-width: 40rem;
    margin: 0 auto;
    padding: 0 1rem 5rem;
  }

  h1 {
    color: #f3f9ff;
    color; white;
    background: #357;
    line-height: 1.1;
    margin: 0 0 1rem;
    padding: 1em 0;
    box-shadow: -39.9rem 0 #357, 39.9rem 0 #357;
  }

h1, h2 {
  font-weight: 100;
  letter-spacing: -0.025em;
}

  h2, h3, h4, h5, h6 {
    color: #357;
    margin: 0 0 0 -0.1em;
    padding: 1.5em 0 0.5rem;
  }
  h1 { font-size: 2.827rem; opacity: 1.00 }
  /* not using 3.998rem */
  h2 { font-size: 3.998rem; opacity: 0.85 }
  h3 { font-size: 1.999rem; opacity: 0.90 }
  h4 { font-size: 1.414rem; opacity: 0.95 }
  h5 { font-size: 1.000rem; opacity: 1.00 }
  h6 { font-size: 0.707rem; opacity: 1.00 }

	h1 { font-size: 2.369rem; opacity: 1.00; font-weight: 400; }
  /* not using 3.157rem */
	h2 { font-size: 2.369rem; opacity: 0.85; font-weight: 200; }
	h3 { font-size: 1.778rem; opacity: 0.90; font-weight: 400; }
	h4 { font-size: 1.333rem; opacity: 0.95; font-weight: 600; }
	h5 { font-size: 1.000rem; opacity: 1.00; font-weight: 800; }
	h6 { font-size: 1.000rem; opacity: 1.00; font-style: italic; }

  h1 { 
    text-transform: uppercase;
    color: #f21;
    text-shadow:
      01px 1.0px 2px #357,
      02px 1.5px #aab24b,
      03px 2.0px #357,
      04px 2.5px #357,
      05px 3.0px #357,
      06px 3.5px #aab24b,
      07px 4.0px #357,
      08px 4.5px #357,
      09px 5.0px #357,
      10px 5.5px #aab24b,
      11px 6.0px #357,
      12px 6.5px #357,
      13px 7.0px #357,
      14px 7.5px #aab24b,
      15px 8.0px #357,
      16px 8.5px #357,
      17px 9.0px #357,
      18px 9.5px #aab24b;
  }
  h2 { 
    border-bottom: 1px solid;
    padding: 3rem 0 0;
    margin-bottom: 1rem;
  }

  h1 a, h2 a, h3 a, h4 a, h5 a, h6 a {
    color: inherit;
    border-bottom: 2px dotted;
    text-decoration: inherit;
  }
  h1 a:hover, h2 a:hover, h3 a:hover, h4 a:hover, h5 a:hover, h6 a:hover {
    border-bottom: 2px solid;
  }

  p {
    margin: 0;
    padding: 0.33em 0;
  }

  code {
    font-size: smaller;
  }

  p > code {
    background: #f3f9ff;
    padding: 0.3em;
    border-radius: 0.3em;
  }

  pre {
    padding: 0.5em;
    background: #f3f9ff;
    border-left: 1px solid #eef0ff;
    max-width: 100%;
    overflow-x: auto;
    /*box-shadow: -50rem 0 #f3f9ff, 50rem 0 #f3f9ff;*/
  }

  pre.small { font-size: 75%; color: rgba(0,0,0, 0.8) }

  /* override some Prism sourcecode highlight styles */
  pre[class*="language-"] {
    line-height: 1.2;
    overflow: visible;
    background: #f3f9ff;
  }
  :not(pre) > code[class*="language-"] {
    background: #f3f9ff;
    padding: 0.3em;
    border-radius: 0.3em;
  }

  code[class*="language-"] {
    line-height: 1.2;
  }

  pre p {
    padding: 0;
  }


  /* ToC management */
  #tocHeading { cursor: pointer; }
  #tocContent { overflow: hidden; font-size: smaller; }
  .open   #tocHeading:after { content: ' \25be' }
  .closed #tocHeading:after { content: ' \25b8' }
  .open   #tocContent { height: auto; }
  .closed #tocContent { height: 0; }

</style>
</head>
<body><div class="wrapper language-scss"><h1>Styling a MediaFlux portal</h1>
<h2>About this document</h2>
<h4>Purpose</h4>
<p>This document describes the default web style applied to
Mediaflux portals, and serves as a springboard for modifying
the styles to produce unique portal experiences.</p>
<p>Light modification is possible by changing colour and size
settings, and enough instruction is also provided for someone
with some web design skills to perform deeper customisations.</p>
<h4>Audience</h4>
<p>Generally this document assumes you're familiar with the
basics of CSS and the HTML Document Object Model.  If you
learned HTML and CSS a while ago, an appendix at the end of
this document will give you a quick overview of the more
modern CSS used in this document.</p>
<p>TODO: add appendix; get someone to look through and highlight
anything they aren't too sure on; document in appendix.</p>
<h4>Source</h4>
<p>This document is written in a &quot;literate&quot; style, where the
source document is both live Sass/SCSS source that produces
the CSS, and a Markdown-formatted document describing the
code.</p>
<p>The source document is already valid SCSS, so CSS is produced
by running it through the Sass compiler.</p>
<pre><code> /*
The original source of the text you're reading is a SCSS formatted 
file.  SCSS is a superset of CSS; it allows all valid CSS, but in 
addition allows for a number of variables calculations that are 
resolved by the SCSS compiler and turned into valid CSS.

To alter the CSS, you should edit the SCSS source file and 
recompile.  Visit the website:
https://github.com/DanielBaird/mediaflux-portal-customisation
for more information.
 */
</code></pre>
<p>(The text above will be included in the output CSS to inform
anyone browsing the CSS about the SCSS source.)</p>
<p>The source is then transformed with a short shell script,
which does two things:</p>
<ul>
<li>finds lines starting with <code>//</code>, and removes those two
initial characters;</li>
<li>indents all other lines by four spaces.</li>
</ul>
<p>These two transformations produce a Markdown document which is
then converted into a HTML document with a Markdown processor.</p>
<h2>Variables</h2>
<p>Much simple customisation of portal sites can be achieved by
editing variables in this section.</p>
<h4>Colour setting variables</h4>
<p>Default to white background and dark text (not quite black, to
avoid harsh contrast).</p>
<pre><code>$page-background: #fff;
$page-color: #333;
</code></pre>
<p>when printing, reset text to black to avoid the blurry
&quot;process&quot; grey many printers use.</p>
<pre><code>$page-print-background: $page-background;
$page-print-color: #000;
</code></pre>
<h4>Page Layout variables</h4>
<p>The maximum width of the main content column is defined here
as 60 root ems wide, which is roughly 120-150 letters.</p>
<pre><code>$column-max-width: 60rem;
</code></pre>
<p>The height of the page header and the size of the heading
inside the page header.  If you update these values, make
sure the <code>$header-height</code> value is larger than the
<code>$header-text-size</code> value.</p>
<pre><code>$header-height: calc(3rem + 5vw);
$header-text-size: calc(1rem + 1vw);
</code></pre>
<p>It's preferable to use a vector format
like SVG for your site logo, but if you're using a pixel
format logo that you prefer doesn't get resized, set the
<code>$resizeable-logo</code> variable to <code>false</code> and specify your logo
size in the <code>$logo-height</code> and <code>$logo-width</code> variables.</p>
<p>If <code>$resizeable-logo</code> is set to <code>true</code>, the logo will be
sized according to the header.</p>
<pre><code>$resizable-logo: true;
$logo-height: 65px;
$logo-width: 65px;
</code></pre>
<p>The height of the main navigation bar is set here using <code>rem</code>
units, which are proportional to the standard text size.</p>
<pre><code>$navbar-height: 3rem;
$navbar-text-size: 1rem;
</code></pre>
<p>The background of the navbar, and the navbar's text and border
colour.
$navbar-background: #fcc;
$navbar-content-color: #060;</p>
<p>TODO: navbar highlight colour and selected colour, should use content colour mobved up from below.</p>
<p>The standard background and text colour for the content.  The
currently selected item in the navbar uses this background
too, so it looks like a selected &quot;tab&quot;.
$content-background: #ccf;
$content-color: #600;</p>
<h2>Setting sane defaults</h2>
<p>Web browsers don't agree in how to format many elements of a
web page.</p>
<p>Normalize.css is a third party project that provides a set
of CSS rules that provides a consistent set of styles for
all browsers.</p>
<p><a href="http://necolas.github.io/normalize.css/">necolas.github.io/normalize.css/</a></p>
<p>In this case, to get Sass to import the Normalize.css source
as inline css, <code>normalize.css</code> should already be renamed to
<code>normalize.scss</code> by an earlier step in the build process.</p>
<pre><code>@import &quot;normalize.scss&quot;;
</code></pre>
<h5>Font family default</h5>
<p>Use the OS's default font if we can.  OS default fonts are
generally quite similar (humanist sans serifs with large
x-height and open counters) so this is unlikely to run into
any significant size differences, but will look familiar and
modern to users.</p>
<pre><code>html {
	font-family: 
        -apple-system,       /* default macOS font for Safari/webkit */ 
        BlinkMacSystemFont,  /* default macOS font for Chrome/blink */
        &quot;Segoe UI&quot;,          /* default Windows font */
        &quot;Roboto&quot;,            /* default Android font */
        &quot;Fira Sans&quot;,         /* default Mozilla font */
        &quot;Droid Sans&quot;,        /* default older Android font */
        &quot;Helvetica Neue&quot;,    /* everyone else */
        sans-serif;          /* Blackberry users, lol */
}
</code></pre>
<h5>Font size default</h5>
<p>Use the CSS calc() feature to give the HTML tag a font size
that grows as the width of the viewport grows. This helps
the portal to display nicely on phone screens.</p>
<p>Requires <code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, minimum-scale=1, initial-scale=1&quot;&gt;</code>
in the <code>head</code> of the page, or the page will zoom oddly on
phone-sized screens.</p>
<pre><code>html {
	font-size: 16px; /* for browsers that don't support calc() */
	font-size: calc(16px + 0.25vw); /* grow font size on wider screen */
	overflow-x: hidden; /* avoid odd widths on narrow screens */
}
</code></pre>
<p>This tag sets the default text and background colour for
normal display, and when printing.  Colours are described in
the Variables section.</p>
<pre><code>body {
    color: $page-color;
    background-color: $page-background;
}
@media print {
    body {
        color:$page-print-color;
        background: $page-print-background;
    }
}
</code></pre>
<h5>Heading size and spacing reset</h5>
<p>Set the font weight and size of all headings to be the same
as their containers, and reset all heading margins and
padding.</p>
<pre><code>h1, h2, h3, h4, h5, h6 {
    font-weight: inherit;
    font-size: inherit;
    margin: 0;
    padding: 0;
}
</code></pre>
<h5>Navigation spacing reset</h5>
<p>Navigation sections of a page usually occur in <code>ul</code> tags that
are inside <code>nav</code> tags.  So here we switch off padding,
margin, and bullets for <code>ul</code> tags inside <code>nav</code> tags.</p>
<pre><code>nav ul {
    list-style: none;
    margin: 0;
    padding: 0;
}
</code></pre>
<h5>Body wrapper</h5>
<p>The <code>mf-body-wrapper</code> class is used on a <code>div</code> that wraps the
entire page content. You might use it to set a page width. In
this styling however it isn't used.</p>
<pre><code>.mf-body-wrapper {
	// ...
}
</code></pre>
<h2>Page header</h2>
<p>All Mediaflux portal pages start with a <code>header</code> tag like
this: <code>&lt;header class=&quot;mf-header&quot; role=&quot;banner&quot;&gt;</code>. The <code>role</code>
attribute identifies the tag as containing site-oriented
content rather than page-specific content.</p>
<p>TODO: describe setting content in config file</p>
<p>This header is the appropriate place to include any
institution-wide banners, navigation bars etc.</p>
<pre><code>.mf-header {
	background-image: linear-gradient(to top, #000, #444);
	color: #fff;
	white-space: nowrap;
	text-align: center;
}
</code></pre>
<p>The portal plugin will not automatically generate a heading
or logo, but those items are supplied in the sample portal
configuration, so styling for them are supplied here.</p>
<pre><code>.mf-heading {
    TODO: color from variable;
	display: inline-block;
	vertical-align: middle;
	font-size: $header-text-size;
	line-height: $header-height;
	font-weight: 200; /* very light font weight */
    letter-spacing: 0.1ch; /* slightly airy letter spacing */
}
</code></pre>
<p>Check the notes in the <em>Page layout variables</em> section for
information about setting the size of the logo.</p>
<pre><code>.mf-header-logo {
	display: inline-block;
	vertical-align: middle;
	margin: 0 1vw;
    @if ($resizable-logo) {
        max-height: $header-text-size;
        max-width: $header-text-size;
    } @else {
        height: $logo-height;
        width: $logo-width;        
    }
}
</code></pre>
<h2>Page navigation</h2>
<p>The main page navigation – between static pages, or
sub-collections of assets – is included in the page as a <code>nav</code>
element with the class <code>mf-navbar</code>.</p>
<pre><code>.mf-navbar {
    font-size: $navbar-text-size;
	background: $navbar-background;
}
</code></pre>
<p>Inside the <code>nav.mf-navbar</code> is a <code>div.mf-navbar-container</code>.
This styling uses the <code>div</code> to set the display width for the
navigation links.</p>
<pre><code>.mf-navbar-container {
	max-width: $column-max-width;
	margin: 0 auto;
}
</code></pre>
<p>Inside the <code>div.mf-navbar-container</code> is a <code>ul.mf-nav-list</code>.
This contains one <code>li</code> for each nav link.  This styling uses
a flexbox layout to stretch the navlinks across the width of
the column.  On a wide display, they'll all have equal widths;
on a narrow display, they'll take the space they need.</p>
<pre><code>.mf-nav-list {
	display: flex;
	flex-direction: row;
	border: 1px solid transparentize($navbar-content-color, 0.66);
	border-width: 0 1px;
}
.mf-nav-list li {
	color: $navbar-content-color;
	text-align: center;
	flex-grow: 1;
	line-height: $navbar-height;
	transition: 0.5s;
	&amp;:hover {
		background-image: linear-gradient(to top, #9cf, #cef);
	}
	&amp;.mf-current-nav-item {
		background: white;
	}
	a {
		color: inherit;
		display: block;
		text-decoration: none;
	}
}
</code></pre>
<p>// page -------------------------------------------------------</p>
<pre><code>.mf-page {
	max-width: $column-max-width;
	margin: 0 auto;
	padding: 2rem 0 3rem;
}
</code></pre>
<p>// footer -----------------------------------------------------</p>
<pre><code>.mf-footer {
	opacity: 0.5;
	text-align: center;
	border-top: 1px solid #ccc;
	line-height: 3;
	white-space: nowrap;
	transition: 0.5s;
	&amp;:hover {
		opacity: 1;
	}
}
</code></pre>
<p>// static page items ------------------------------------------</p>
<pre><code>.mf-static-page-title {
	font-size: 2rem;
	padding: 1rem 0;
}

.mf-static-page-content {

	code, pre {
		background: #eee;
	}
	code {
		padding: 0.1em 0.33em;
		border-radius: 0.2em;
	}
	pre {
		max-width: 100%;
		overflow: auto;
	}

	p {
		line-height: 1.5;
		padding: 0.5em 0;
	}

	h1, h2, h3, h4, h5, h6 {
		line-height: 1.2;
		padding: 1em 0 0.5rem;
	}

	ul { padding: 0.25em 0 0.25em 0; }
	ul ul { padding: 0 0 0 1.5em; }
	li {
		padding: 0.1em 0;
		list-style-position: inside;
	}
	li { list-style-type: square; }
	li li { list-style-type: circle; }
	li li li { list-style-type: disc; }
	li li li li { list-style-type: square; }
</code></pre>
<p>perfect fourth: http://type-scale.com/?scale=1.333&amp;font-family=BlinkMacSystemFont</p>
<p>Use calc to scale the headings proportionally larger if you're on a big screen
Write this up later..</p>
<pre><code>	h1 { font-size: 3.157rem; font-size: calc(3.157rem + 1.578vw); font-weight: 100; }
	h2 { font-size: 2.369rem; font-size: calc(2.369rem + 1.184vw); font-weight: 200; }
	h3 { font-size: 1.778rem; font-size: calc(1.778rem + 0.888vw); font-weight: 400; }
	h4 { font-size: 1.333rem; font-size: calc(1.333rem + 0.666vw); font-weight: 600; }
	h5 { font-size: 1.000rem; font-size: calc(1.000rem + 0.500vw); font-weight: 800; }
	h6 { font-size: 1.000rem; font-size: calc(1.000rem + 0.500vw); font-style: italic; }

}
</code></pre>
<p>// collection page --------------------------------------------</p>
<pre><code>.mf-collection-bar {
	border: 1px solid pink;
	padding: 1em;
}

.mf-collection-sidebar {

}
</code></pre>
<h2>Appendix: Sass and CSS refresher</h2>
<p>TODO</p>
<ul>
<li>six-char colours and three-char colour shorthand</li>
<li>rem units</li>
<li>vw and vh units</li>
<li>calc(..)</li>
<li>transition</li>
</ul>
</div>
<!-- source highlighting -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/components/prism-scss.min.js"></script>
</body>
</html>